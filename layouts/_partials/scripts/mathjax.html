{{/* MathJax */}}
{{ $mathjaxVersion := site.Params.math.mathjaxVersion | default "3.2.2" -}}
{{ $mathjaxJsUrl := printf "https://cdn.jsdelivr.net/npm/mathjax@%s/es5/tex-chtml.js" $mathjaxVersion -}}
{{ with try (resources.GetRemote $mathjaxJsUrl) -}}
  {{ with .Err -}}
    {{ errorf "Could not retrieve MathJax js file from %s. Reason: %s." $mathjaxJsUrl . -}}
  {{ else with .Value -}}
    {{ with resources.Copy "js/mathjax.js" . -}}
      {{ $mathjaxJs := . | fingerprint -}}
      <script defer id="MathJax-script" src="{{ $mathjaxJs.RelPermalink }}" integrity="{{ $mathjaxJs.Data.Integrity }}" crossorigin="anonymous"></script>
    {{ end -}}
  {{ end -}}
{{ end -}}
<script>
  MathJax = {
    tex: {
      displayMath: [['\\[', '\\]'], ['$$', '$$']],
      inlineMath: [['\\(', '\\)']]
    },
    loader: { load: ['ui/safe'] }
  };
</script>
